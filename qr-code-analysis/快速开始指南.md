# å¿«é€Ÿå¼€å§‹æŒ‡å—

## 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### æ­¥éª¤1: å®‰è£…ä¾èµ–

```bash
pip install opencv-python numpy pyzbar Pillow
```

### æ­¥éª¤2: å‡†å¤‡æµ‹è¯•å›¾ç‰‡

å°†åŒ…å«äºŒç»´ç çš„å›¾ç‰‡æ”¾å…¥é¡¹ç›®ç›®å½•ï¼Œä¾‹å¦‚ `test_qr.jpg`

### æ­¥éª¤3: è¿è¡Œåˆ†æ

åˆ›å»º `quick_start.py` æ–‡ä»¶ï¼š

```python
from qr_analyzer_basic import QRCodeAnalyzer

# åˆ›å»ºåˆ†æå™¨
analyzer = QRCodeAnalyzer()

# åˆ†æå›¾ç‰‡
results = analyzer.analyze_image("test_qr.jpg")

# æ‰“å°ç»“æœ
for i, qr in enumerate(results, 1):
    print(f"\n===== äºŒç»´ç  #{i} =====")
    print(f"ğŸ“ ä½ç½®: ({qr['bbox']['x']}, {qr['bbox']['y']})")
    print(f"ğŸ“ å°ºå¯¸: {qr['bbox']['width']} x {qr['bbox']['height']}")
    print(f"ğŸ“Š é¢ç§¯å æ¯”: {qr['area_ratio_percent']:.2f}%")
    print(f"âœ… å¤§äº5%: {'æ˜¯' if qr['area_larger_than_5_percent'] else 'å¦'}")
    print(f"ğŸ” æ¸…æ™°åº¦: {qr['clarity_class']} (è¯„åˆ†: {qr['clarity_score']:.2f})")
    print(f"ğŸ¨ é¢œè‰²å¯¹æ¯”: {qr['color_contrast_class']}")
    print(f"ğŸ“± äºŒç»´ç å†…å®¹: {qr['qr_data']}")
```

è¿è¡Œï¼š
```bash
python quick_start.py
```

### æ­¥éª¤4: æ‰¹é‡å¤„ç†

```python
from qr_analyzer_basic import QRCodeAnalyzer
import glob

# åˆ›å»ºåˆ†æå™¨
analyzer = QRCodeAnalyzer()

# è·å–æ‰€æœ‰jpgå›¾ç‰‡
image_files = glob.glob("*.jpg")

# æ‰¹é‡åˆ†æ
results = analyzer.batch_analyze(image_files)

# ä¿å­˜ç»“æœ
analyzer.save_results(results, "batch_results.json")

# ç”Ÿæˆæ±‡æ€»æŠ¥å‘Š
report = analyzer.generate_summary_report(results)

print("\n===== æ±‡æ€»æŠ¥å‘Š =====")
print(f"å¤„ç†å›¾ç‰‡æ€»æ•°: {report['summary']['total_images_processed']}")
print(f"æ£€æµ‹åˆ°çš„äºŒç»´ç æ€»æ•°: {report['summary']['total_qr_codes_detected']}")
print(f"å¹³å‡æ¯å¼ å›¾ç‰‡äºŒç»´ç æ•°: {report['summary']['average_qr_per_image']}")

print("\næ¸…æ™°åº¦åˆ†å¸ƒ:")
for clarity, count in report['clarity_distribution'].items():
    print(f"  {clarity}: {count}")

print("\nå¯¹æ¯”åº¦åˆ†å¸ƒ:")
for contrast, count in report['contrast_distribution'].items():
    print(f"  {contrast}: {count}")
```

## å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ£€æŸ¥äº§å“åŒ…è£…ä¸Šçš„äºŒç»´ç è´¨é‡

```python
analyzer = QRCodeAnalyzer()

# åˆ†æäº§å“å›¾ç‰‡
result = analyzer.analyze_image("product_package.jpg")

for qr in result:
    # æ£€æŸ¥æ˜¯å¦ç¬¦åˆè´¨é‡æ ‡å‡†
    is_qualified = (
        qr['area_larger_than_5_percent'] and  # é¢ç§¯è¶³å¤Ÿå¤§
        qr['clarity_level'] <= 2 and          # æ¸…æ™°æˆ–è½»åº¦æ¨¡ç³Š
        qr['has_good_contrast']               # å¯¹æ¯”åº¦è¶³å¤Ÿ
    )

    if is_qualified:
        print("âœ… äºŒç»´ç è´¨é‡åˆæ ¼")
    else:
        print("âŒ äºŒç»´ç è´¨é‡ä¸åˆæ ¼")
        if not qr['area_larger_than_5_percent']:
            print("  - é¢ç§¯è¿‡å°")
        if qr['clarity_level'] > 2:
            print(f"  - æ¸…æ™°åº¦ä¸è¶³: {qr['clarity_class']}")
        if not qr['has_good_contrast']:
            print("  - å¯¹æ¯”åº¦ä¸è¶³")
```

### åœºæ™¯2: æµ·æŠ¥äºŒç»´ç ä½ç½®æ£€æµ‹

```python
import cv2

analyzer = QRCodeAnalyzer()
results = analyzer.analyze_image("poster.jpg")

# åœ¨åŸå›¾ä¸Šæ ‡æ³¨äºŒç»´ç ä½ç½®
image = cv2.imread("poster.jpg")

for qr in results:
    x = qr['bbox']['x']
    y = qr['bbox']['y']
    w = qr['bbox']['width']
    h = qr['bbox']['height']

    # ç”»è¾¹ç•Œæ¡†
    cv2.rectangle(image, (x, y), (x+w, y+h), (0, 255, 0), 3)

    # æ·»åŠ æ–‡æœ¬
    label = f"{qr['clarity_class']} - {qr['area_ratio_percent']:.1f}%"
    cv2.putText(image, label, (x, y-10),
                cv2.FONT_HERSHEY_SIMPLEX, 0.6, (0, 255, 0), 2)

# ä¿å­˜ç»“æœ
cv2.imwrite("poster_annotated.jpg", image)
print("æ ‡æ³¨ç»“æœå·²ä¿å­˜åˆ° poster_annotated.jpg")
```

### åœºæ™¯3: è´¨é‡ç­›é€‰

```python
import shutil
import os

analyzer = QRCodeAnalyzer()
image_files = glob.glob("input/*.jpg")

# åˆ›å»ºè¾“å‡ºç›®å½•
os.makedirs("output/good", exist_ok=True)
os.makedirs("output/bad", exist_ok=True)

for img_file in image_files:
    results = analyzer.analyze_image(img_file)

    # åˆ¤æ–­è´¨é‡
    is_good = all(
        qr['clarity_level'] <= 2 and qr['has_good_contrast']
        for qr in results
    )

    # åˆ†ç±»ä¿å­˜
    if is_good:
        shutil.copy(img_file, "output/good/")
        print(f"âœ… {img_file} -> good")
    else:
        shutil.copy(img_file, "output/bad/")
        print(f"âŒ {img_file} -> bad")
```

## è‡ªå®šä¹‰é…ç½®

### è°ƒæ•´æ¸…æ™°åº¦é˜ˆå€¼

```python
analyzer = QRCodeAnalyzer()

# è‡ªå®šä¹‰é˜ˆå€¼
analyzer.clarity_thresholds = {
    'clear': 600,           # æé«˜æ ‡å‡†
    'slight_blur': 250,
    'medium_blur': 80
}

analyzer.contrast_threshold = 60  # æé«˜å¯¹æ¯”åº¦è¦æ±‚
```

### ä½¿ç”¨é…ç½®æ–‡ä»¶

```python
import yaml

# åŠ è½½é…ç½®
with open('config.yaml', 'r', encoding='utf-8') as f:
    config = yaml.safe_load(f)

# åº”ç”¨é…ç½®
analyzer = QRCodeAnalyzer()
analyzer.clarity_thresholds = config['analyzer']['clarity_thresholds']
analyzer.contrast_threshold = config['analyzer']['contrast_threshold']
```

## æ€§èƒ½ä¼˜åŒ–æŠ€å·§

### æŠ€å·§1: é™ä½å›¾åƒåˆ†è¾¨ç‡

```python
import cv2

def resize_if_large(image_path, max_width=1920):
    image = cv2.imread(image_path)
    height, width = image.shape[:2]

    if width > max_width:
        scale = max_width / width
        new_width = max_width
        new_height = int(height * scale)
        image = cv2.resize(image, (new_width, new_height))

        # ä¿å­˜ä¸´æ—¶æ–‡ä»¶
        temp_path = "temp_resized.jpg"
        cv2.imwrite(temp_path, image)
        return temp_path

    return image_path

# ä½¿ç”¨
resized_path = resize_if_large("large_image.jpg")
results = analyzer.analyze_image(resized_path)
```

### æŠ€å·§2: å¹¶è¡Œå¤„ç†

```python
from concurrent.futures import ThreadPoolExecutor
import os

def process_single_image(image_path):
    analyzer = QRCodeAnalyzer()
    return image_path, analyzer.analyze_image(image_path)

# å¹¶è¡Œå¤„ç†
with ThreadPoolExecutor(max_workers=os.cpu_count()) as executor:
    results = dict(executor.map(
        lambda x: process_single_image(x),
        image_files
    ))
```

## æ•…éšœæ’é™¤

### é—®é¢˜: æ£€æµ‹ä¸åˆ°äºŒç»´ç 

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥å›¾ç‰‡è´¨é‡æ˜¯å¦è¶³å¤Ÿå¥½
2. å°è¯•è°ƒæ•´å›¾ç‰‡äº®åº¦/å¯¹æ¯”åº¦
3. ç¡®ä¿äºŒç»´ç æ²¡æœ‰è¢«é®æŒ¡
4. å°è¯•ä½¿ç”¨å…¶ä»–æ£€æµ‹æ–¹æ¡ˆï¼ˆè§è§£å†³æ–¹æ¡ˆæ–‡æ¡£.mdï¼‰

```python
# å¢å¼ºå¯¹æ¯”åº¦
import cv2

image = cv2.imread("low_contrast.jpg")
lab = cv2.cvtColor(image, cv2.COLOR_BGR2LAB)
l, a, b = cv2.split(lab)

# CLAHEå¢å¼º
clahe = cv2.createCLAHE(clipLimit=3.0, tileGridSize=(8,8))
l = clahe.apply(l)

# åˆå¹¶
enhanced = cv2.merge([l, a, b])
enhanced = cv2.cvtColor(enhanced, cv2.COLOR_LAB2BGR)

cv2.imwrite("enhanced.jpg", enhanced)

# å†æ¬¡å°è¯•
results = analyzer.analyze_image("enhanced.jpg")
```

### é—®é¢˜: pyzbarå¯¼å…¥å¤±è´¥

**Windowsè§£å†³æ–¹æ¡ˆ:**
```bash
# ä¸‹è½½zbar DLL
# ä» http://zbar.sourceforge.net/ ä¸‹è½½
# å°†DLLæ”¾åˆ° Python\Lib\site-packages\pyzbar ç›®å½•
```

**Linuxè§£å†³æ–¹æ¡ˆ:**
```bash
sudo apt-get install libzbar0
```

**Macè§£å†³æ–¹æ¡ˆ:**
```bash
brew install zbar
```

## è¿›é˜¶ä½¿ç”¨

æŸ¥çœ‹ `è§£å†³æ–¹æ¡ˆæ–‡æ¡£.md` äº†è§£ï¼š
- 11ç§ä¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆ
- æ·±åº¦å­¦ä¹ æ–¹æ¡ˆ
- äº‘ç«¯APIé›†æˆ
- å¤šæ¨¡å‹é›†æˆ
- Vision Transformeræ–¹æ¡ˆ

## è·å–å¸®åŠ©

- æŸ¥çœ‹ README.md
- æŸ¥çœ‹ è§£å†³æ–¹æ¡ˆæ–‡æ¡£.md
- è¿è¡Œæµ‹è¯•: `pytest test_qr_analyzer.py -v`
- æäº¤ Issue

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼
