# 二维码图片数据收集指南

## 数据收集目标

收集包含二维码的真实图片，涵盖以下维度：
- **面积占比**：大于5%、小于5%
- **清晰度**：清晰、轻度模糊、中度模糊、重度模糊
- **对比度**：高对比度、低对比度
- **场景**：产品包装、海报、名片、屏幕截图、印刷品等

## 数据收集方法

### 方法1：搜索引擎图片搜索

#### 谷歌图片搜索
**搜索关键词：**

1. **清晰、高对比度二维码**
   - `QR code on product package`
   - `QR code on poster`
   - `QR code on business card`
   - `QR code print quality`
   - `high quality QR code`
   - `clear QR code example`

2. **模糊二维码**
   - `blurry QR code`
   - `out of focus QR code`
   - `low quality QR code photo`
   - `unclear QR code`
   - `motion blur QR code`

3. **小尺寸二维码**
   - `small QR code on package`
   - `tiny QR code`
   - `QR code in corner`
   - `QR code on label`

4. **大尺寸二维码**
   - `large QR code poster`
   - `big QR code display`
   - `QR code billboard`
   - `full page QR code`

5. **低对比度二维码**
   - `white QR code on gray`
   - `low contrast QR code`
   - `QR code poor visibility`
   - `similar color QR code background`

6. **复杂场景二维码**
   - `QR code in real world`
   - `QR code on product photo`
   - `multiple QR codes`
   - `QR code street photography`

7. **中文搜索关键词**
   - `产品包装二维码`
   - `海报二维码`
   - `名片二维码`
   - `模糊二维码`
   - `清晰二维码`
   - `二维码印刷质量`
   - `商品二维码照片`

**搜索技巧：**
- 使用图片搜索，不是网页搜索
- 添加 `filetype:jpg` 或 `filetype:png` 限制格式
- 使用 `site:` 限定特定网站（如电商网站）
- 使用 `size:large` 获取高分辨率图片
- 使用引号精确匹配：`"QR code" "product"`

#### 百度图片搜索
- `产品二维码`
- `包装盒二维码`
- `海报二维码`
- `宣传单二维码`
- `模糊二维码`

#### Bing图片搜索
- 同谷歌搜索关键词
- 图片筛选：大小、颜色、布局等

### 方法2：免费图片素材网站

#### Unsplash (unsplash.com)
- 搜索：`QR code`
- 高质量免费图片
- 可商用

#### Pexels (pexels.com)
- 搜索：`QR code`, `barcode`, `product package`
- 免费商用图片

#### Pixabay (pixabay.com)
- 搜索：`QR code`, `QR code poster`
- 免费图片

#### Freepik (freepik.com)
- 搜索：`QR code mockup`
- 部分需要注册

### 方法3：电商网站截图

#### 淘宝/天猫
- 搜索产品，查看商品详情图
- 很多产品包装上有二维码
- 使用浏览器开发者工具保存大图

#### 京东
- 同上，商品详情图

#### 亚马逊
- Product images with QR codes

**推荐产品类别：**
- 食品包装（饮料、零食）
- 数码产品包装
- 化妆品包装
- 书籍背面
- 电子票务

### 方法4：开放数据集

#### GitHub
- 搜索：`QR code dataset`
- 许多研究者分享的数据集

#### Kaggle
- 搜索：`QR code`, `barcode detection`
- 竞赛数据集

#### Roboflow Universe
- 计算机视觉数据集平台
- 搜索：`QR code detection`

### 方法5：社交媒体

#### Pinterest
- 搜索：`QR code design`, `QR code poster`
- 大量设计案例

#### Instagram
- Hashtags: `#qrcode`, `#qrcodeart`
- 真实使用场景

#### 小红书
- 搜索：`二维码设计`, `创意二维码`

### 方法6：实地拍摄

**拍摄场景：**
- 商场/超市产品
- 海报/广告牌
- 餐厅菜单
- 公交站牌
- 电影票/演出票
- 快递单

**拍摄技巧：**
- 拍摄不同距离（远近）
- 拍摄不同角度
- 模拟不同光照条件
- 故意拍摄模糊样本
- 包含背景环境

## 数据收集标准

### 数量建议
每个类别至少收集：
- 清晰二维码：20-30张
- 轻度模糊：15-20张
- 中度模糊：10-15张
- 重度模糊：5-10张
- 小尺寸（<5%）：15-20张
- 大尺寸（>5%）：15-20张
- 低对比度：10-15张
- 混合场景：20-30张

**总计：110-170张**

### 质量标准
- **分辨率**：至少 800x600 像素
- **格式**：JPG 或 PNG
- **文件大小**：50KB - 5MB
- **二维码可见**：二维码在图片中清晰可辨（即使模糊）

### 多样性要求
- **不同背景**：白色、彩色、纹理、复杂背景
- **不同二维码类型**：普通黑白、彩色、带logo、艺术设计
- **不同应用场景**：产品、海报、名片、屏幕、印刷品
- **不同拍摄条件**：正面、侧面、远近、光照

## 数据标注建议

收集后建议手动标注：

```json
{
  "filename": "product_qr_001.jpg",
  "source": "unsplash",
  "scene": "product_package",
  "expected_clarity": "clear",
  "expected_area_ratio": "large",
  "expected_contrast": "high",
  "notes": "食品包装上的二维码，光线良好"
}
```

## 数据组织结构

```
real_data/
├── clear_high_contrast/       清晰、高对比度
├── clear_low_contrast/        清晰、低对比度
├── blurred_slight/            轻度模糊
├── blurred_medium/            中度模糊
├── blurred_heavy/             重度模糊
├── small_area/                小面积（<5%）
├── large_area/                大面积（>5%）
├── complex_scene/             复杂场景
├── product_package/           产品包装
├── poster_billboard/          海报广告
└── labels.json                标注文件
```

## 版权注意事项

1. **优先使用**：
   - CC0（公有领域）图片
   - CC-BY（署名）图片
   - 明确可商用的图片

2. **避免使用**：
   - 有版权保护的商业图片
   - 未经授权的个人照片
   - 受商标保护的品牌包装（如需测试）

3. **安全做法**：
   - 自己拍摄
   - 使用开放数据集
   - 使用免费图片网站
   - 生成合成数据

## 自动化收集脚本

### 使用Selenium自动下载

```python
from selenium import webdriver
from selenium.webdriver.common.by import By
import time
import requests
import os

def download_images_from_google(keyword, num_images=20):
    """从谷歌图片搜索下载图片"""
    driver = webdriver.Chrome()

    # 搜索
    url = f"https://www.google.com/search?q={keyword}&tbm=isch"
    driver.get(url)
    time.sleep(2)

    # 滚动加载更多图片
    for _ in range(3):
        driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
        time.sleep(1)

    # 获取图片链接
    images = driver.find_elements(By.CSS_SELECTOR, "img.rg_i")

    # 下载
    for i, img in enumerate(images[:num_images]):
        try:
            img.click()
            time.sleep(1)

            # 获取大图URL
            large_img = driver.find_element(By.CSS_SELECTOR, "img.n3VNCb")
            img_url = large_img.get_attribute("src")

            if img_url and img_url.startswith("http"):
                # 下载
                response = requests.get(img_url, timeout=10)
                filename = f"image_{i+1}.jpg"
                with open(filename, 'wb') as f:
                    f.write(response.content)
                print(f"Downloaded {filename}")
        except Exception as e:
            print(f"Error: {e}")

    driver.quit()

# 使用
download_images_from_google("clear QR code on product", 20)
```

### 使用API获取

```python
import requests

def download_from_unsplash(query, per_page=10):
    """使用Unsplash API下载"""
    api_key = "YOUR_API_KEY"
    url = f"https://api.unsplash.com/search/photos"

    params = {
        "query": query,
        "per_page": per_page,
        "client_id": api_key
    }

    response = requests.get(url, params=params)
    data = response.json()

    for i, photo in enumerate(data['results']):
        img_url = photo['urls']['regular']
        img_response = requests.get(img_url)

        filename = f"unsplash_{i+1}.jpg"
        with open(filename, 'wb') as f:
            f.write(img_response.content)
        print(f"Downloaded {filename}")

# 使用
download_from_unsplash("QR code", 10)
```

## 数据质量检查

收集后使用脚本检查：

```python
import cv2
import os
from pyzbar import pyzbar

def check_qr_quality(image_dir):
    """检查图片中是否包含可检测的二维码"""
    results = {
        'total': 0,
        'with_qr': 0,
        'without_qr': 0,
        'failed': []
    }

    for filename in os.listdir(image_dir):
        if not filename.endswith(('.jpg', '.png')):
            continue

        results['total'] += 1
        path = os.path.join(image_dir, filename)

        try:
            image = cv2.imread(path)
            gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
            qr_codes = pyzbar.decode(gray)

            if qr_codes:
                results['with_qr'] += 1
                print(f"✓ {filename}: Found {len(qr_codes)} QR code(s)")
            else:
                results['without_qr'] += 1
                print(f"✗ {filename}: No QR code detected")
        except Exception as e:
            results['failed'].append(filename)
            print(f"! {filename}: Error - {e}")

    print(f"\n总计: {results['total']}")
    print(f"包含二维码: {results['with_qr']}")
    print(f"未检测到: {results['without_qr']}")
    print(f"处理失败: {len(results['failed'])}")

    return results
```

## 推荐工作流程

1. **第一天**：从免费图片网站收集 30-50 张
2. **第二天**：从搜索引擎收集 30-50 张
3. **第三天**：实地拍摄 20-30 张
4. **第四天**：下载开放数据集 30-50 张
5. **第五天**：整理分类和标注

## 快速开始

最快的方法：
1. 访问 unsplash.com
2. 搜索 "QR code"
3. 下载 20 张高质量图片
4. 访问 google.com/images
5. 搜索不同关键词各下载 10-20 张
6. 使用手机拍摄 10-20 张真实场景

**总耗时：1-2小时，可获得 50-80 张真实图片**

## 工具推荐

- **图片批量下载**：ImageAssistant（Chrome扩展）
- **图片管理**：XnView、FastStone
- **图片标注**：LabelImg、CVAT
- **自动化**：Selenium、Puppeteer

## 常见问题

**Q: 图片数量建议？**
A: 100-200张即可覆盖大部分场景，如需训练深度学习模型则需要1000+张。

**Q: 需要标注吗？**
A: 基础测试不需要，如需评估准确率或训练模型则需要标注。

**Q: 可以用生成的数据吗？**
A: 生成的数据适合功能验证，真实数据更能反映实际性能。

**Q: 如何快速验证数据质量？**
A: 使用 pyzbar 或其他二维码检测工具批量扫描，查看检测率。

## 数据集分享

建议将收集的数据集整理后分享到：
- GitHub
- Kaggle
- Roboflow Universe
- 百度云/阿里云盘

帮助其他开发者！
